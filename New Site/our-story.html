<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" href="assets/images/rsfsa-140x128-1.png" type="image/x-icon">
  <meta name="description" content="Our Story - 42 Years of Volunteer Para-Medic Service on Van Reenens Pass">
  <title>Our Story - Road Safety Foundation</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@100;200;300;400;500;600;700;800&family=Lato:wght@100;300;400;700&display=swap" rel="stylesheet">

  <!-- Core Stylesheets -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.0/dist/cyborg/bootstrap.min.css">
  <link rel="stylesheet" href="assets/theme/css/cyborg-raleway.css">
  <link rel="stylesheet" href="assets/socicon/css/styles.css">
  <link rel="stylesheet" href="assets/animate.css/animate.min.css">
  <link rel="stylesheet" href="assets/fontawesome/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

  <!-- Custom Styles -->
  <style>
  /* Increase hero section height by 50% */
  .page-header {
    min-height: 540px;
    display: flex;
    align-items: center;
    padding-top: 3rem;
    padding-bottom: 3rem;
  }
    :root {
      /* Cyborg Theme Colors */
      --primary-color: #2a9fd6;
      --secondary-color: #77b300;
      --success-color: #77b300;
      --info-color: #9933cc;
      --warning-color: #ff8800;
      --danger-color: #cc0000;


      .gallery-nav-left {
        left: 10px;
      }

      .gallery-nav-right {
        right: 10px;
      }

      .gallery-image-container,
      .gallery-video-container {
        margin: 0 55px;
      }

      .gallery-thumbnails {
        padding: 10px 15px;
        max-height: 140px;
      }

      .gallery-thumbnail,
      .video-thumbnail {
        width: 60px;
        height: 45px;
      }
    }

    @media (max-width: 480px) {
      .gallery-nav {
        width: 35px;
        height: 35px;
        font-size: 0.9rem;
      }

      .gallery-image-container,
      .gallery-video-container {
        margin: 0 45px;
      }
    }

    /* Social Media Icons */
    .social-links a {
      display: inline-block;
      transition: all 0.3s ease;
      text-decoration: none;
    }

    .social-links a:hover {
      transform: translateY(-2px);
      filter: brightness(1.2);
    }

    .social-links i {
      display: inline-block;
      width: 1.5em;
      text-align: center;
    }

    /* Ensure FontAwesome icons load properly */
    .fab {
      font-family: "Font Awesome 6 Brands" !important;
      font-weight: 400 !important;
    }

    .fas {
      font-family: "Font Awesome 6 Free" !important;
      font-weight: 900 !important;
    }

    /* Form Styles */
    .form-control {
      background: var(--bg-secondary);
      border: 1px solid var(--border-color);
      color: var(--text-primary);
    }

    .form-control:focus {
      background: var(--bg-secondary);
      border-color: var(--primary-color);
      color: var(--text-primary);
      box-shadow: 0 0 0 0.2rem rgba(42, 159, 214, 0.25);
    }

    /* HIDE ALL CONTENT BELOW FOOTER */
    .after-footer-hidden {
      display: none !important;
    }

    /* Traffic Alerts Marquee */
    .traffic-marquee {
      background: var(--warning-color);
      color: #000;
      padding: 8px 0;
      overflow: hidden;
      white-space: nowrap;
      position: relative;
      border-top: 2px solid #ff6600;
    }
    .traffic-marquee-content {
      display: inline-block;
      animation: scroll-left 60s linear infinite;
      padding-left: 100%;
    }
    .traffic-alert-item {
      display: inline-block;
      margin-right: 50px;
      font-weight: 600;
      font-size: 0.9rem;
    }
    .traffic-alert-item i {
      margin-right: 8px;
      color: #cc0000;
    }
    @keyframes scroll-left {
      0% { transform: translateX(0%); }
      100% { transform: translateX(-100%); }
    }
  </style>
</head>
<body>

<!-- Page Header -->
<section class="page-header">
    <div class="container">
        <div class="row align-items-center">
            <!-- Image Column (First Column) -->
            <div class="col-lg-3 col-md-4 col-sm-12 order-lg-1 order-2 mb-lg-0 mb-4">
                <div class="hero-image-container">
                    <img src="assets/images/Philip TP.png" 
                         alt="Philip - 42 Years of Service" 
                         class="img-fluid"
                         style="width: 200px; height: auto; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); border: 2px solid #77b300;">
                </div>
            </div>
            
            <!-- Content Column (Second Column) -->
            <div class="col-lg-9 col-md-8 col-sm-12 order-lg-2 order-1">
                <div class="text-lg-start text-center">
                    <span class="badge bg-success text-white px-3 py-2 rounded-pill mb-3 fw-semibold">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" class="me-2">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        42 Years of Service
                    </span>
                    <h1 class="display-3 fw-normal mb-4" style="color: #ffffff; text-shadow: 2px 2px 4px rgba(0,0,0,0.8);">Our <span style="color: #77b300; text-shadow: 2px 2px 4px rgba(0,0,0,0.8);">Story</span></h1>
                    <p class="lead mb-4" style="color: #f8f9fa; text-shadow: 1px 1px 3px rgba(0,0,0,0.7); font-weight: 400; font-size: 1.2rem;">42 Years of Volunteer Para-Medic Service on Van Reenens Pass, N3 Route, KwaZulu-Natal. A journey of dedication, courage, and saving lives on one of South Africa's most treacherous mountain passes.</p>
                </div>
            </div>
        </div>
    </div>


</section>

<!-- Coming Soon Section -->
<section class="coming-soon-section py-5" style="background: #23272b; color: #fff; text-align: center;">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <h2 class="display-5 fw-bold mb-3" style="color: #77b300;">Coming Soon</h2>
        <p class="lead mb-0" style="color: #fff;">Exciting new content about the 42-year journey of volunteer para-medic service on Van Reenens Pass is on its way. Stay tuned for updates!</p>
      </div>
    </div>
  </div>
</section>

<!-- Traffic Alerts Marquee -->
<div class="traffic-marquee">
  <div class="traffic-marquee-content">
    <span class="traffic-alert-item"><i class="fas fa-exclamation-triangle"></i> N3 Van Reenens Pass: Fog and icy conditions, drive with caution.</span>
    <span class="traffic-alert-item"><i class="fas fa-exclamation-triangle"></i> Roadworks between Harrismith and Ladysmith, expect delays.</span>
    <span class="traffic-alert-item"><i class="fas fa-exclamation-triangle"></i> Emergency services on standby for holiday traffic.</span>
    <span class="traffic-alert-item"><i class="fas fa-exclamation-triangle"></i> Check your vehicle lights and brakes before mountain travel.</span>
  </div>
</div>



<!-- Footer -->
<footer class="py-5" style="background: var(--bg-dark-secondary); color: var(--text-light); border-top: 1px solid var(--bg-dark-tertiary);">
    <div class="container">
        <div class="row">
            <div class="col-lg-4 mb-4">
                <div class="d-flex align-items-center mb-3">
                    <img src="assets/images/rsfsa-140x128-1.png" alt="Road Safety Foundation" height="50" class="me-3">
                    <h5 class="mb-0">Road Safety Foundation</h5>
                </div>
                <p class="text-muted">
                    Dedicated to making South African roads safer through research, education, and partnerships.
                </p>
            </div>
            <div class="col-lg-2 col-md-6 mb-4">
                <h6 class="fw-bold mb-3">Quick Links</h6>
                <ul class="list-unstyled">
                    <li><a href="aboutus.html" class="text-muted text-decoration-none">About Us</a></li>
                    <li><a href="News.html" class="text-muted text-decoration-none">News</a></li>
                    <li><a href="BLOG.html" class="text-muted text-decoration-none">Blog</a></li>
                    <li><a href="ContactUs.html" class="text-muted text-decoration-none">Contact</a></li>
                </ul>
            </div>
            <div class="col-lg-2 col-md-6 mb-4">
                <h6 class="fw-bold mb-3">Resources</h6>
                <ul class="list-unstyled">
                    <li><a href="Videos.html" class="text-muted text-decoration-none">Videos</a></li>
                    <li><a href="legislation.html" class="text-muted text-decoration-none">Legislation</a></li>
                    <li><a href="Forums.html" class="text-muted text-decoration-none">Let's Talk</a></li>
                    <li><a href="Markerboards.html" class="text-muted text-decoration-none">Help</a></li>
                </ul>
            </div>
            <div class="col-lg-4 mb-4">
                <h6 class="fw-bold mb-3">Contact Info</h6>
                <p class="text-muted mb-2">
                    <i class="fas fa-envelope me-2" style="color: #0ea5e9;"></i>
                    info@rsfsa.co.za
                </p>
                <p class="text-muted mb-2">
                    <i class="fas fa-phone me-2" style="color: #10b981;"></i>
                    <span id="phone-number" data-number="+27 82 803 6363" style="cursor: pointer;" title="Click to reveal phone number">Click to show phone</span>
                </p>
                <p class="text-muted">
                    <i class="fas fa-map-marker-alt me-2" style="color: #f97316;"></i>
                    South Africa
                </p>
            </div>
        </div>
        
        <!-- Social Media Icons Row -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="social-links d-flex justify-content-center flex-wrap gap-3">
                    <a href="https://www.facebook.com/roadsafetyfoundationsa" target="_blank" title="Facebook 1" style="color: #1877f2; font-size: 1.5rem;">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="https://www.facebook.com/CommunityMedicalServices" target="_blank" title="Facebook 2" style="color: #1877f2; font-size: 1.5rem;">
                        <i class="fab fa-facebook-square"></i>
                    </a>
                    <a href="https://www.youtube.com/@RoadMatters-r8b/videos" target="_blank" title="YouTube" style="color: #ff0000; font-size: 1.5rem;">
                        <i class="fab fa-youtube"></i>
                    </a>
                    <a href="#" title="Instagram - Coming Soon" style="color: #e4405f; opacity: 0.6; font-size: 1.5rem;" class="d-flex flex-column align-items-center">
                        <i class="fab fa-instagram"></i>
                        <small style="font-size: 0.5em; color: var(--text-muted); margin-top: 2px;">Coming Soon</small>
                    </a>
                    <a href="#" title="WhatsApp - Coming Soon" style="color: #25d366; opacity: 0.6; font-size: 1.5rem;" class="d-flex flex-column align-items-center">
                        <i class="fab fa-whatsapp"></i>
                        <small style="font-size: 0.5em; color: var(--text-muted); margin-top: 2px;">Coming Soon</small>
                    </a>
                </div>
            </div>
        </div>
        
        <hr class="my-4">
        
        <div class="row align-items-center">
            <div class="col-md-6">
                <p class="text-muted mb-0">&copy; 2024 Road Safety Foundation of South Africa. All rights reserved.</p>
            </div>
            <div class="col-md-6 text-md-end">
                <a href="privacy-policy.html" class="text-muted text-decoration-none me-3">Privacy Policy</a>
                <a href="terms-of-service.html" class="text-muted text-decoration-none">Terms of Service</a>
            </div>
        </div>    </div>
</footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
// ElevenLabs Configuration
const ELEVENLABS_CONFIG = {
    apiKey: 'sk_557ccec7d86ec44823e4a64cc8ec25fda02f3cc9c2149e6e', // Your ElevenLabs API key
    voiceId: 'pNInz6obpgDQGcFmaJgB', // Adam - Pre-made voice (should work with free tier)
    apiUrl: 'https://api.elevenlabs.io/v1/text-to-speech/',
    model: 'eleven_monolingual_v1', // Good for English, can change to eleven_multilingual_v1 if needed
    voiceSettings: {
        stability: 0.5,
        similarity_boost: 0.5,
        style: 0.0,
        use_speaker_boost: true
    }
};

// Audio management
let currentAudio = null;
let isPlaying = false;

// Function to convert HTML content to plain text for audio
function htmlToText(html) {
    const temp = document.createElement('div');
    temp.innerHTML = html;
    
    // Remove script and style elements
    const scripts = temp.querySelectorAll('script, style');
    scripts.forEach(el => el.remove());
    
    // Get text content and clean it up
    let text = temp.textContent || temp.innerText || '';
    
    // Clean up whitespace and formatting
    text = text.replace(/\s+/g, ' ').trim();
    
    // Remove any remaining HTML entities
    text = text.replace(/&[#\w]+;/g, '');
    
    return text;
}

// Function to play chapter audio using ElevenLabs
async function playChapterAudio(chapterNumber) {
    if (!ELEVENLABS_CONFIG.apiKey || !ELEVENLABS_CONFIG.voiceId) {
        alert('ElevenLabs API configuration is missing. Please check the API key and voice ID.');
        return;
    }

    const chapter = chapterContent[chapterNumber];
    if (!chapter) {
        alert('Chapter content not found.');
        return;
    }

    // Stop any currently playing audio
    if (currentAudio) {
        currentAudio.pause();
        currentAudio = null;
        isPlaying = false;
        updateListenButtonStates();
    }

    try {
        // Show loading state
        updateListenButtonStates(chapterNumber, 'loading');
        
        // Prepare text content
        const fullText = `${chapter.title}. ${htmlToText(chapter.content)}`;
        
        // Check text length (ElevenLabs has character limits)
        if (fullText.length > 5000) {
            // For very long content, we might want to split it or show a warning
            console.warn('Text is quite long, this may take a while to generate...');
        }

        // Make API call to ElevenLabs
        const response = await fetch(`${ELEVENLABS_CONFIG.apiUrl}${ELEVENLABS_CONFIG.voiceId}`, {
            method: 'POST',
            headers: {
                'Accept': 'audio/mpeg',
                'Content-Type': 'application/json',
                'xi-api-key': ELEVENLABS_CONFIG.apiKey
            },
            body: JSON.stringify({
                text: fullText,
                model_id: ELEVENLABS_CONFIG.model,
                voice_settings: ELEVENLABS_CONFIG.voiceSettings
            })
        });

        if (!response.ok) {
            // Get more detailed error information
            let errorText = '';
            try {
                const errorData = await response.json();
                errorText = errorData.detail || errorData.message || JSON.stringify(errorData);
            } catch (e) {
                errorText = await response.text();
            }
            throw new Error(`ElevenLabs API error: ${response.status} ${response.statusText} - ${errorText}`);
        }

        // Convert response to audio blob
        const audioBlob = await response.blob();
        const audioUrl = URL.createObjectURL(audioBlob);
        
        // Create and play audio
        currentAudio = new Audio(audioUrl);
        
        currentAudio.addEventListener('loadstart', () => {
            updateListenButtonStates(chapterNumber, 'loading');
        });
        
        currentAudio.addEventListener('canplaythrough', () => {
            updateListenButtonStates(chapterNumber, 'ready');
        });
        
        currentAudio.addEventListener('play', () => {
            isPlaying = true;
            updateListenButtonStates(chapterNumber, 'playing');
        });
        
        currentAudio.addEventListener('pause', () => {
            isPlaying = false;
            updateListenButtonStates();
        });
        
        currentAudio.addEventListener('ended', () => {
            isPlaying = false;
            currentAudio = null;
            updateListenButtonStates();
            // Clean up the blob URL
            URL.revokeObjectURL(audioUrl);
        });
        
        currentAudio.addEventListener('error', (e) => {
            console.error('Audio playback error:', e);
            alert('Error playing audio. Please try again.');
            updateListenButtonStates();
        });

        // Start playing
        await currentAudio.play();
        
    } catch (error) {
        console.error('Error generating or playing audio:', error);
        
        let errorMessage = 'Error generating audio. ';
        if (error.message.includes('API error')) {
            errorMessage += 'Please check your ElevenLabs API key and voice ID.';
        } else if (error.message.includes('Failed to fetch')) {
            errorMessage += 'Network error. Please check your internet connection.';
        } else {
            errorMessage += 'Please try again.';
        }
        
        alert(errorMessage);
        updateListenButtonStates();
    }
}

// Function to stop audio playback
function stopAudio() {
    if (currentAudio) {
        currentAudio.pause();
        currentAudio = null;
        isPlaying = false;
        updateListenButtonStates();
    }
}

// Function to update listen button states across all chapters
function updateListenButtonStates(activeChapter = null, state = 'default') {
    const listenButtons = document.querySelectorAll('.action-icon.listen');
    
    listenButtons.forEach((button, index) => {
        const chapterRow = button.closest('.chapter-row');
        const chapterNumber = parseInt(chapterRow.querySelector('.chapter-number-badge').textContent);
        const icon = button.querySelector('i');
        
        // Reset all buttons to default state first
        button.classList.remove('loading', 'playing', 'ready');
        button.style.animation = '';
        
        if (chapterNumber === activeChapter) {
            switch (state) {
                case 'loading':
                    button.classList.add('loading');
                    button.style.animation = 'pulse 1.5s infinite';
                    button.title = 'Generating audio...';
                    if (icon) icon.className = 'fas fa-spinner';
                    break;
                case 'ready':
                    button.classList.add('ready');
                    button.title = 'Ready to play';
                    if (icon) icon.className = 'fas fa-headphones';
                    break;
                case 'playing':
                    button.classList.add('playing');
                    button.title = 'Playing audio - click to stop';
                    if (icon) icon.className = 'fas fa-stop';
                    break;
                default:
                    button.title = 'Listen to this Chapter';
                    if (icon) icon.className = 'fas fa-headphones';
            }
        } else {
            button.title = 'Listen to this Chapter';
            if (icon) icon.className = 'fas fa-headphones';
        }
    });
}

// Chapter content data
const chapterContent = {
    1: {
        title: "1983 - The Year It All Began",
        year: "1983",
        content: `
            <p>It was a bitterly cold winter morning on July 15th, 1983, when Philip Hull witnessed an accident that would change his life forever and mark the beginning of 42 years of dedicated volunteer emergency medical service on Van Reenens Pass.</p>
            
            <h4>The Incident That Started It All</h4>
            <p>A truck carrying a family had jackknifed on the icy road surface near the summit of Van Reenens Pass. The nearest ambulance was over 45 minutes away, and the injured passengers were in critical condition. Philip, with his basic first aid training, was the only person available to provide immediate medical assistance.</p>
            
            <p>That day, he saved three lives. But more importantly, he realized the desperate need for immediate medical response on this treacherous mountain pass that connects KwaZulu-Natal and the Free State.</p>
            
            <h4>The Decision</h4>
            <p>Within weeks of that incident, Philip made a life-changing decision. He would dedicate himself to providing emergency medical services on Van Reenens Pass, ensuring that no one would have to wait helplessly for help to arrive from distant towns.</p>
            
            <p>He began by upgrading his first aid training, acquiring basic medical equipment, and establishing communication with local emergency services. Little did he know that this decision would grow into a 42-year legacy of saving lives on one of South Africa's most dangerous mountain passes.</p>
            
            <h4>The Early Challenges</h4>
            <p>The harsh mountain conditions, unpredictable weather, and the sheer remoteness of the location made every emergency response a test of skill, courage, and determination. But Philip was committed to his mission, driven by the memory of that first winter morning when he first understood the true meaning of saving a life.</p>
        `
    },
    2: {
        title: "1984 - First Lessons in Emergency Care",
        year: "1984",
        content: `
            <p>The second year brought invaluable lessons in emergency medical response. Every call was a learning experience, every life saved a validation of the mission that had begun just one year earlier.</p>
            
            <h4>Expanding Knowledge</h4>
            <p>Philip enrolled in advanced first aid courses and began building relationships with paramedics and emergency medical personnel from surrounding areas. The knowledge gained would prove crucial in handling the complex trauma cases that were common on the mountain pass.</p>
            
            <p>This year saw the first major multi-vehicle accident response, where Philip's quick thinking and improved medical skills helped coordinate rescue efforts for eight casualties until professional emergency services could arrive.</p>
            
            <h4>Building the Foundation</h4>
            <p>Equipment upgrades included a proper first aid station, improved communication devices, and a dedicated emergency vehicle. The foundation for what would become a comprehensive emergency response system was being laid, one piece at a time.</p>
            
            <p>Local truckers and regular pass users began to recognize Philip's vehicle and know that help was available. Word was spreading that Van Reenens Pass now had a guardian angel watching over travelers.</p>
        `
    },
    3: {
        title: "1985 - The Mountain Claims Its Toll",
        year: "1985",
        content: `
            <p>The winter of 1985 was particularly brutal, with ice storms and fog creating some of the most dangerous driving conditions ever recorded on Van Reenens Pass. This year would test every skill Philip had developed and push the limits of what one person could accomplish.</p>
            
            <h4>The Great Ice Storm</h4>
            <p>In June 1985, a severe ice storm left the pass completely impassable for three days. During this time, Philip responded to 15 separate incidents, ranging from minor injuries to life-threatening trauma cases. Working almost continuously for 72 hours, he provided medical care to over 30 people stranded on the mountain.</p>
            
            <p>This experience highlighted the need for additional volunteers and more sophisticated equipment. It also demonstrated the incredible impact that one dedicated person could have in emergency situations.</p>
            
            <h4>Recognition and Growth</h4>
            <p>The provincial emergency services began to take notice of Philip's work. Official recognition came in the form of enhanced training opportunities and access to better medical equipment. The solo mission was beginning to evolve into something larger.</p>
            
            <p>The first volunteer approached Philip in late 1985, inspired by stories of his dedication and wanting to help save lives on the mountain. This marked the beginning of what would eventually become a network of trained volunteers.</p>
        `
    },
    4: {
        title: "1986 - Building a Network of Heroes",
        year: "1986",
        content: `
            <p>With the success of the previous years and growing recognition of the need for emergency services on Van Reenens Pass, 1986 marked the beginning of building a network of dedicated volunteers who would carry the mission forward.</p>
            
            <h4>The First Recruits</h4>
            <p>Three local residents joined Philip in 1986, each bringing unique skills and dedication to the cause. Together, they established the first formal training program for mountain emergency response, focusing on trauma care, mountain rescue techniques, and communication protocols.</p>
            
            <p>The team concept allowed for 24/7 coverage of the pass, ensuring that help would always be available regardless of the time of day or weather conditions.</p>
            
            <h4>Systematic Approach</h4>
            <p>Standard operating procedures were developed, emergency response protocols were established, and a proper communication system was put in place. What had started as one man's mission was becoming a professional emergency response service.</p>
            
            <p>The success rate improved dramatically with the team approach, and response times were cut in half. The mountain pass was becoming safer for everyone who traveled through it.</p>
        `
    },
    5: {
        title: "1987 - The Christmas Miracle",
        year: "1987",
        content: `
            <p>Christmas Eve 1987 brought one of the most challenging and ultimately rewarding experiences in the early years of the Van Reenens Pass emergency response service.</p>
            
            <h4>The Bus Accident</h4>
            <p>A bus carrying 45 passengers, mostly families traveling home for Christmas, lost control on an icy section of the pass. The vehicle rolled down an embankment, leaving multiple casualties in difficult terrain during a snowstorm.</p>
            
            <p>The newly formed volunteer team responded immediately, despite the dangerous conditions. Working in shifts throughout the night, they provided medical care, coordinated with rescue services, and ensured that every passenger received appropriate treatment.</p>
            
            <h4>A Christmas to Remember</h4>
            <p>All 45 passengers survived the accident. While many suffered injuries, the quick response and professional medical care provided by the volunteer team prevented any fatalities. It was truly a Christmas miracle.</p>
            
            <p>The families involved in the accident sent letters of gratitude that poured in for months afterward. This incident cemented the reputation of the Van Reenens Pass emergency service and demonstrated the life-saving impact of the volunteer program.</p>
            
            <p>Christmas 1987 became a defining moment that would be remembered and celebrated for years to come, proving that the spirit of giving and saving lives knows no bounds.</p>
        `
    },
    10: {
        title: "1992 - A Decade of Service",
        year: "1992",
        content: `
            <p>Ten years after that first winter morning in 1983, the Van Reenens Pass emergency response service had grown from one man's mission into a respected and essential service recognized throughout KwaZulu-Natal and the Free State.</p>
            
            <h4>Milestone Achievements</h4>
            <p>By 1992, the volunteer team had responded to over 1,200 emergency calls, saved countless lives, and established Van Reenens Pass as one of the safest mountain routes in South Africa despite its challenging terrain and weather conditions.</p>
            
            <p>The service now included 12 trained volunteers, modern emergency equipment, and formal partnerships with provincial emergency services, hospitals, and rescue organizations.</p>
            
            <h4>Training and Development</h4>
            <p>A comprehensive training program was established, covering advanced trauma care, mountain rescue techniques, emergency vehicle operation, and psychological support for accident victims. The program became a model for other mountain pass emergency services.</p>
            
            <p>Recognition came in the form of awards from the provincial government and emergency services organizations. The volunteers were honored for their dedication and the measurable impact they had made on road safety.</p>
            
            <h4>Looking Forward</h4>
            <p>As the service entered its second decade, plans were made for expansion and modernization. New technologies, improved equipment, and enhanced training would ensure that the mission could continue for years to come.</p>
        `
    },
    20: {
        title: "2002 - Twenty Years Strong",
        year: "2002",
        content: `
            <p>Two decades of service marked a significant milestone in the evolution of emergency response on Van Reenens Pass. The volunteer service had not only survived but thrived, adapting to new technologies and changing needs while maintaining its core mission of saving lives.</p>
            
            <h4>Technology Revolution</h4>
            <p>The year 2002 brought significant technological advances to the service. GPS tracking, digital communication systems, and computerized patient records improved response times and coordination with other emergency services.</p>
            
            <p>A new fleet of emergency vehicles, equipped with the latest medical equipment and communication technology, replaced the original makeshift response setup. The service now rivaled professional ambulance services in capabilities and response times.</p>
            
            <h4>New Generation of Volunteers</h4>
            <p>Many of the original volunteers were now training the next generation of emergency responders. Sons and daughters of original volunteers joined the service, ensuring continuity and bringing fresh perspectives and energy to the mission.</p>
            
            <p>The volunteer base had grown to 25 trained responders, allowing for specialized teams focused on different aspects of emergency response, from trauma care to mountain rescue to psychological support.</p>
            
            <h4>Community Impact</h4>
            <p>Studies showed that the fatality rate on Van Reenens Pass had decreased by 60% since the inception of the volunteer emergency service. The economic impact of improved road safety was estimated in the millions of rand annually.</p>
            
            <p>The service had become an integral part of the community and a symbol of what dedicated volunteers could accomplish when working together toward a common goal.</p>
        `
    },
    30: {
        title: "2012 - Three Decades of Dedication",
        year: "2012",
        content: `
            <p>Thirty years of continuous volunteer service on Van Reenens Pass represented an extraordinary achievement in community service and emergency response. The legacy that began with one man's determination had grown into an institution.</p>
            
            <h4>Official Recognition</h4>
            <p>In 2012, the Van Reenens Pass Emergency Response Service received formal recognition from both provincial and national emergency services organizations. The volunteers were honored with awards for exceptional community service and contributions to road safety.</p>
            
            <p>Government officials visited the service to understand how the volunteer model could be replicated on other dangerous routes throughout South Africa. The success story was featured in national media and emergency services publications.</p>
            
            <h4>Training Academy</h4>
            <p>The establishment of a formal training academy marked a new chapter in the service's evolution. The academy began training volunteers not only for Van Reenens Pass but for other mountain routes throughout the region.</p>
            
            <p>Partnerships with medical schools and emergency services training programs brought academic rigor to the volunteer training process while maintaining the practical, hands-on approach that had proven so effective.</p>
            
            <h4>Legacy Planning</h4>
            <p>With Philip now in his senior years, succession planning became a priority. The service had grown beyond any one individual and had established systems and procedures that would ensure its continuation for generations to come.</p>
            
            <p>The 30-year milestone was celebrated with a gathering of current and former volunteers, families of those who had been helped, and officials from throughout the emergency services community.</p>
        `
    },
    40: {
        title: "2022 - Four Decades of Saving Lives",
        year: "2022",
        content: `
            <p>Forty years of volunteer emergency service represented an almost unimaginable achievement in dedication and community service. The impact of the Van Reenens Pass Emergency Response Service had extended far beyond the mountain pass itself.</p>
            
            <h4>Unprecedented Achievement</h4>
            <p>By 2022, the service had responded to over 8,000 emergency calls, directly saved hundreds of lives, and provided assistance to tens of thousands of travelers. The transformation of Van Reenens Pass from one of South Africa's most dangerous routes to one of its safest was complete.</p>
            
            <p>Statistical analysis showed that response times had improved from an average of 45 minutes in 1983 to less than 8 minutes in 2022. The survival rate for serious accidents had increased dramatically, and the service had achieved international recognition.</p>
            
            <h4>Modern Emergency Service</h4>
            <p>The volunteer service now operated with equipment and capabilities that exceeded many professional emergency services. Advanced life support capabilities, helicopter landing zones, and coordination with multiple emergency services had created a comprehensive safety net.</p>
            
            <p>The service had adapted to modern challenges including increased traffic volumes, new vehicle technologies, and changing injury patterns while maintaining its volunteer-based, community-focused approach.</p>
            
            <h4>Inspiring Others</h4>
            <p>The Van Reenens Pass model had been replicated on mountain passes throughout South Africa and had influenced emergency response planning in other countries. The legacy of one man's decision in 1983 had grown to impact emergency services globally.</p>
            
            <p>Academic studies of the service contributed to emergency management theory and volunteer service models, ensuring that the lessons learned would benefit future emergency response development.</p>
        `
    },
    42: {
        title: "2024 - The Legacy Continues",
        year: "2024",
        content: `
            <p>Forty-two years after that first winter morning in 1983, the Van Reenens Pass Emergency Response Service stands as a testament to what dedicated volunteers can accomplish when they commit themselves to serving others.</p>
            
            <h4>Completing the Circle</h4>
            <p>In 2024, Philip Hull, now in his 80s, passed the leadership of the service to the next generation. The transition marked not an end but a continuation of the mission that had defined his life and touched thousands of others.</p>
            
            <p>The Road Safety Foundation of South Africa had grown from the Van Reenens Pass service, carrying the mission of safer roads and emergency preparedness throughout the country. The legacy had expanded beyond the mountain pass to influence road safety nationally.</p>
            
            <h4>Modern Challenges, Timeless Mission</h4>
            <p>While technology and techniques had evolved dramatically since 1983, the core mission remained unchanged: to ensure that no one traveling through Van Reenens Pass would face an emergency alone. The volunteers of 2024 carried forward the same dedication and commitment that had driven Philip for four decades.</p>
            
            <p>New challenges including climate change effects on mountain weather, increased traffic volumes, and evolving vehicle technologies required constant adaptation, but the volunteer spirit and community commitment remained strong.</p>
            
            <h4>A Living Legacy</h4>
            <p>The service continues to save lives, train new volunteers, and serve as an example of what communities can accomplish when they work together. The story that began with one person's decision to help has become a legacy that will endure for generations.</p>
            
            <p>Every life saved, every volunteer trained, and every family safely reunited carries forward the spirit of that cold winter morning in 1983 when everything changed on Van Reenens Pass.</p>
            
            <p>The legacy continues, and the mountain pass remains safe for all who travel through it, protected by volunteers who understand that saving lives is not just a service but a calling.</p>
        `
    }
};

document.addEventListener('DOMContentLoaded', function() {
    // Navbar scroll effect
    const navbar = document.getElementById('mainNav');
    window.addEventListener('scroll', function() {
        if (window.scrollY > 100) {
            navbar.classList.add('scrolled');
        } else {
            navbar.classList.remove('scrolled');
        }
    });

    // Chapter action handlers
    document.querySelectorAll('.action-icon').forEach(icon => {
        icon.addEventListener('click', function() {
            const chapterRow = this.closest('.chapter-row');
            const chapterNumber = parseInt(chapterRow.querySelector('.chapter-number-badge').textContent);
            const actionType = this.classList.contains('read') ? 'read' :
                              this.classList.contains('listen') ? 'listen' :
                              this.classList.contains('images') ? 'images' : 'video';
            
            if (actionType === 'read') {
                openReadModal(chapterNumber);
            } else if (actionType === 'listen') {
                // Handle audio playback
                if (isPlaying && currentAudio) {
                    stopAudio();
                } else {
                    playChapterAudio(chapterNumber);
                }
            } else if (actionType === 'images') {
                openImageGallery(chapterNumber);
            } else {
                openVideoGallery(chapterNumber);
            }
        });
    });

    // More button handlers
    document.querySelectorAll('.more-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const chapterRow = this.closest('.chapter-row');
            const chapterNumber = chapterRow.querySelector('.chapter-number-badge').textContent;
            
            // Open read modal for "More" button as well
            openReadModal(parseInt(chapterNumber));
        });
    });

    // Smooth scrolling for timeline navigation
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // Close modal when clicking outside of content
    document.getElementById('readModal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeReadModal();
        }
    });

    // Close modal with Escape key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeReadModal();
        }
    });
});

function openReadModal(chapterNumber) {
    const modal = document.getElementById('readModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalYear = document.getElementById('modalYear');
    const modalBody = document.getElementById('modalBody');
    
    const chapter = chapterContent[chapterNumber];
    
    if (chapter) {
        modalTitle.textContent = chapter.title;
        modalYear.textContent = chapter.year;
        modalBody.innerHTML = chapter.content;
    } else {
        // Default content for chapters not yet detailed
        modalTitle.textContent = `Chapter ${chapterNumber}`;
        modalYear.textContent = `${1982 + chapterNumber}`;
        modalBody.innerHTML = `
            <p>This chapter represents year ${1982 + chapterNumber} of the Van Reenens Pass Emergency Response Service.</p>
            <p>Content for this chapter is being developed and will include detailed accounts of the events, challenges, and achievements of this important year in the service's history.</p>
            <p>Each year brought new experiences, lessons learned, and lives saved through the dedication of volunteers committed to making Van Reenens Pass safer for all travelers.</p>
        `;
    }
    
    modal.classList.add('show');
    document.body.style.overflow = 'hidden'; // Prevent background scrolling
}

function closeReadModal() {
    const modal = document.getElementById('readModal');
    modal.classList.remove('show');
    document.body.style.overflow = ''; // Restore background scrolling
}

// Gallery Modal Management
let currentImageIndex = 0;
let currentVideoIndex = 0;
let currentImageGallery = [];
let currentVideoGallery = [];

// Sample image and video data for each chapter
const galleryData = {
    1: {
        images: [
            {
                src: 'assets/images/1983-first-response.jpg',
                caption: 'The first emergency response on Van Reenens Pass - July 15, 1983',
                thumbnail: 'assets/images/thumbs/1983-first-response-thumb.jpg'
            },
            {
                src: 'assets/images/1983-winter-conditions.jpg',
                caption: 'Harsh winter conditions that led to the first accident',
                thumbnail: 'assets/images/thumbs/1983-winter-conditions-thumb.jpg'
            },
            {
                src: 'assets/images/1983-basic-equipment.jpg',
                caption: 'Basic first aid equipment used in the early days',
                thumbnail: 'assets/images/thumbs/1983-basic-equipment-thumb.jpg'
            },
            {
                src: 'assets/images/1983-van-reenens-pass.jpg',
                caption: 'Van Reenens Pass in 1983 - treacherous mountain terrain',
                thumbnail: 'assets/images/thumbs/1983-van-reenens-pass-thumb.jpg'
            },
            {
                src: 'assets/images/1983-philip-young.jpg',
                caption: 'Philip Hull beginning his 42-year journey of service',
                thumbnail: 'assets/images/thumbs/1983-philip-young-thumb.jpg'
            }
        ],
        videos: [
            {
                src: 'assets/videos/1983-documentary-intro.mp4',
                caption: 'Documentary introduction to the Van Reenens Pass emergency service',
                thumbnail: 'assets/images/thumbs/1983-documentary-thumb.jpg'
            },
            {
                src: 'assets/videos/1983-pass-conditions.mp4',
                caption: 'Footage of Van Reenens Pass conditions in winter 1983',
                thumbnail: 'assets/images/thumbs/1983-conditions-thumb.jpg'
            },
            {
                src: 'assets/videos/1983-first-aid-training.mp4',
                caption: 'Basic first aid training from the early years',
                thumbnail: 'assets/images/thumbs/1983-training-thumb.jpg'
            }
        ]
    },
    2: {
        images: [
            {
                src: 'assets/images/1984-training-course.jpg',
                caption: 'Advanced first aid training course - 1984',
                thumbnail: 'assets/images/thumbs/1984-training-course-thumb.jpg'
            },
            {
                src: 'assets/images/1984-first-response-vehicle.jpg',
                caption: 'The first dedicated emergency response vehicle',
                thumbnail: 'assets/images/thumbs/1984-first-response-vehicle-thumb.jpg'
            },
            {
                src: 'assets/images/1984-medical-equipment.jpg',
                caption: 'Upgraded medical equipment for better emergency care',
                thumbnail: 'assets/images/thumbs/1984-medical-equipment-thumb.jpg'
            },
            {
                src: 'assets/images/1984-multi-vehicle-accident.jpg',
                caption: 'Scene of the first major multi-vehicle accident response',
                thumbnail: 'assets/images/thumbs/1984-multi-vehicle-accident-thumb.jpg'
            }
        ],
        videos: [
            {
                src: 'assets/videos/1984-training-footage.mp4',
                caption: 'Training footage from advanced first aid courses',
                thumbnail: 'assets/images/thumbs/1984-training-footage-thumb.jpg'
            },
            {
                src: 'assets/videos/1984-response-demonstration.mp4',
                caption: 'Emergency response demonstration and procedures',
                thumbnail: 'assets/images/thumbs/1984-response-demo-thumb.jpg'
            }
        ]
    },
    // Add more chapters as needed...
    42: {
        images: [
            {
                src: 'assets/images/2024-modern-service.jpg',
                caption: 'Modern emergency response service in 2024',
                thumbnail: 'assets/images/thumbs/2024-modern-service-thumb.jpg'
            },
            {
                src: 'assets/images/2024-philip-legacy.jpg',
                caption: 'Philip Hull - 42 years of dedicated service',
                thumbnail: 'assets/images/thumbs/2024-philip-legacy-thumb.jpg'
            },
            {
                src: 'assets/images/2024-volunteer-team.jpg',
                caption: 'Current volunteer team carrying forward the mission',
                thumbnail: 'assets/images/thumbs/2024-volunteer-team-thumb.jpg'
            },
            {
                src: 'assets/images/2024-equipment-modern.jpg',
                caption: 'State-of-the-art emergency equipment and vehicles',
                thumbnail: 'assets/images/thumbs/2024-equipment-modern-thumb.jpg'
            }
        ],
        videos: [
            {
                src: 'assets/videos/2024-legacy-documentary.mp4',
                caption: '42 Years of Service - Complete documentary',
                thumbnail: 'assets/images/thumbs/2024-legacy-documentary-thumb.jpg'
            },
            {
                src: 'assets/videos/2024-modern-response.mp4',
                caption: 'Modern emergency response in action',
                thumbnail: 'assets/images/thumbs/2024-modern-response-thumb.jpg'
            }
        ]
    }
};

// Function to get fallback content for chapters without specific gallery data
function getFallbackGalleryData(chapterNumber) {
    const year = 1982 + chapterNumber;
    // Using data URLs for placeholder images to avoid 404 errors
    const placeholderImage = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='800' height='600' fill='%23333'/%3E%3Ctext x='400' y='300' font-family='Arial, sans-serif' font-size='24' fill='%23fff' text-anchor='middle'%3E${year} - Van Reenens Pass%3C/text%3E%3C/svg%3E";
    const placeholderThumbnail = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='90' viewBox='0 0 120 90'%3E%3Crect width='120' height='90' fill='%23444'/%3E%3Ctext x='60' y='45' font-family='Arial, sans-serif' font-size='12' fill='%23fff' text-anchor='middle'%3E${year}%3C/text%3E%3C/svg%3E";
    
    return {
        images: [
            {
                src: placeholderImage,
                caption: `Van Reenens Pass emergency service - ${year}`,
                thumbnail: placeholderThumbnail
            },
            {
                src: placeholderImage,
                caption: `Volunteer team in action - ${year}`,
                thumbnail: placeholderThumbnail
            },
            {
                src: placeholderImage,
                caption: `Emergency equipment and vehicles - ${year}`,
                thumbnail: placeholderThumbnail
            },
            {
                src: placeholderImage,
                caption: `Life-saving response on the mountain - ${year}`,
                thumbnail: placeholderThumbnail
            }
        ],
        videos: [
            {
                src: '', // Empty for now, will show message
                caption: `Emergency response footage - ${year} (Coming Soon)`,
                thumbnail: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='90' viewBox='0 0 120 90'%3E%3Crect width='120' height='90' fill='%23222'/%3E%3Ctext x='60' y='35' font-family='Arial, sans-serif' font-size='10' fill='%23fff' text-anchor='middle'%3EVideo%3C/text%3E%3Ctext x='60' y='55' font-family='Arial, sans-serif' font-size='10' fill='%23fff' text-anchor='middle'%3EComing Soon%3C/text%3E%3C/svg%3E"
            }
        ]
    };
}

// Image Gallery Functions
function openImageGallery(chapterNumber) {
    const modal = document.getElementById('imageGalleryModal');
    const title = document.getElementById('imageGalleryTitle');
    
    // Get gallery data for this chapter
    const data = galleryData[chapterNumber] || getFallbackGalleryData(chapterNumber);
    currentImageGallery = data.images || [];
    
    if (currentImageGallery.length === 0) {
        alert('No images available for this chapter yet.');
        return;
    }
    
    currentImageIndex = 0;
    title.textContent = `Chapter ${chapterNumber} - Images`;
    
    // Generate thumbnails
    generateImageThumbnails();
    
    // Show first image
    displayCurrentImage();
    
    // Show modal
    modal.classList.add('show');
    document.body.style.overflow = 'hidden';
}

function closeImageGallery() {
    const modal = document.getElementById('imageGalleryModal');
    modal.classList.remove('show');
    document.body.style.overflow = '';
    currentImageGallery = [];
    currentImageIndex = 0;
}

function displayCurrentImage() {
    if (currentImageGallery.length === 0) return;
    
    const img = document.getElementById('galleryImage');
    const counter = document.getElementById('imageCounter');
    const caption = document.getElementById('imageCaption');
    const leftNav = document.querySelector('.gallery-nav-left');
    const rightNav = document.querySelector('.gallery-nav-right');
    
    const currentImage = currentImageGallery[currentImageIndex];
    
    // Add error handling for image loading
    img.onerror = function() {
        this.src = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='600' viewBox='0 0 800 600'%3E%3Crect width='800' height='600' fill='%23333'/%3E%3Ctext x='400' y='280' font-family='Arial, sans-serif' font-size='24' fill='%23fff' text-anchor='middle'%3EImage Not Available%3C/text%3E%3Ctext x='400' y='320' font-family='Arial, sans-serif' font-size='16' fill='%23ccc' text-anchor='middle'%3EContent coming soon%3C/text%3E%3C/svg%3E";
        this.onerror = null; // Prevent infinite loop
    };
    
    img.src = currentImage.src;
    img.alt = currentImage.caption;
    counter.textContent = `${currentImageIndex + 1} / ${currentImageGallery.length}`;
    caption.textContent = currentImage.caption;
    
    // Update navigation buttons
    leftNav.disabled = currentImageIndex === 0;
    rightNav.disabled = currentImageIndex === currentImageGallery.length - 1;
    
    // Update thumbnail active state
    updateImageThumbnailsActive();
}

function generateImageThumbnails() {
    const container = document.getElementById('imageThumbnails');
    container.innerHTML = '';
    
    currentImageGallery.forEach((image, index) => {
        const img = document.createElement('img');
        img.src = image.thumbnail || image.src;
        img.alt = image.caption;
        img.className = 'gallery-thumbnail';
        if (index === 0) img.classList.add('active');
        
        img.addEventListener('click', () => {
            currentImageIndex = index;
            displayCurrentImage();
        });
        
        container.appendChild(img);
    });
}

function updateImageThumbnailsActive() {
    const thumbnails = document.querySelectorAll('#imageThumbnails .gallery-thumbnail');
    thumbnails.forEach((thumb, index) => {
        thumb.classList.toggle('active', index === currentImageIndex);
    });
}

function previousImage() {
    if (currentImageIndex > 0) {
        currentImageIndex--;
        displayCurrentImage();
    }
}

function nextImage() {
    if (currentImageIndex < currentImageGallery.length - 1) {
        currentImageIndex++;
        displayCurrentImage();
    }
}

// Video Gallery Functions
function openVideoGallery(chapterNumber) {
    const modal = document.getElementById('videoGalleryModal');
    const title = document.getElementById('videoGalleryTitle');
    
    // Get gallery data for this chapter
    const data = galleryData[chapterNumber] || getFallbackGalleryData(chapterNumber);
    currentVideoGallery = data.videos || [];
    
    if (currentVideoGallery.length === 0) {
        alert('No videos available for this chapter yet.');
        return;
    }
    
    currentVideoIndex = 0;
    title.textContent = `Chapter ${chapterNumber} - Videos`;
    
    // Generate thumbnails
    generateVideoThumbnails();
    
    // Show first video
    displayCurrentVideo();
    
    // Show modal
    modal.classList.add('show');
    document.body.style.overflow = 'hidden';
}

function closeVideoGallery() {
    const modal = document.getElementById('videoGalleryModal');
    const video = document.getElementById('galleryVideo');
    
    // Pause video when closing
    video.pause();
    
    modal.classList.remove('show');
    document.body.style.overflow = '';
    currentVideoGallery = [];
    currentVideoIndex = 0;
}

function displayCurrentVideo() {
    if (currentVideoGallery.length === 0) return;
    
    const video = document.getElementById('galleryVideo');
    const counter = document.getElementById('videoCounter');
    const caption = document.getElementById('videoCaption');
    const leftNav = document.querySelector('#videoGalleryModal .gallery-nav-left');
    const rightNav = document.querySelector('#videoGalleryModal .gallery-nav-right');
    
    const currentVideo = currentVideoGallery[currentVideoIndex];
    
    // Pause current video before switching
    video.pause();
    
    // Handle empty video sources (coming soon content)
    if (!currentVideo.src || currentVideo.src === '') {
        video.style.display = 'none';
        // Show a "coming soon" message instead
        let messageDiv = document.querySelector('.video-coming-soon-message');
        if (!messageDiv) {
            messageDiv = document.createElement('div');
            messageDiv.className = 'video-coming-soon-message';
            messageDiv.style.cssText = `
                display: flex;
                align-items: center;
                justify-content: center;
                background: #222;
                color: #fff;
                font-size: 1.2rem;
                text-align: center;
                border-radius: 8px;
                width: 100%;
                height: 400px;
                margin: 20px 0;
            `;
            video.parentNode.insertBefore(messageDiv, video);
        }
        messageDiv.style.display = 'flex';
        messageDiv.innerHTML = `
            <div>
                <i class="fas fa-video" style="font-size: 3rem; margin-bottom: 20px; color: #ff8800;"></i>
                <br>
                Video content for this chapter<br>
                will be available soon
            </div>
        `;
    } else {
        // Hide coming soon message and show video
        const messageDiv = document.querySelector('.video-coming-soon-message');
        if (messageDiv) messageDiv.style.display = 'none';
        
        video.style.display = 'block';
        
        // Update video source
        const source = video.querySelector('source');
        source.src = currentVideo.src;
        video.load(); // Reload the video element
    }
    
    counter.textContent = `${currentVideoIndex + 1} / ${currentVideoGallery.length}`;
    caption.textContent = currentVideo.caption;
    
    // Update navigation buttons
    leftNav.disabled = currentVideoIndex === 0;
    rightNav.disabled = currentVideoIndex === currentVideoGallery.length - 1;
    
    // Update thumbnail active state
    updateVideoThumbnailsActive();
}

function generateVideoThumbnails() {
    const container = document.getElementById('videoThumbnails');
    container.innerHTML = '';
    
    currentVideoGallery.forEach((video, index) => {
        const div = document.createElement('div');
        div.className = 'video-thumbnail';
        if (index === 0) div.classList.add('active');
        
        div.addEventListener('click', () => {
            currentVideoIndex = index;
            displayCurrentVideo();
        });
        
        container.appendChild(div);
    });
}

function updateVideoThumbnailsActive() {
    const thumbnails = document.querySelectorAll('#videoThumbnails .video-thumbnail');
    thumbnails.forEach((thumb, index) => {
        thumb.classList.toggle('active', index === currentVideoIndex);
    });
}

function previousVideo() {
    if (currentVideoIndex > 0) {
        currentVideoIndex--;
        displayCurrentVideo();
    }
}

function nextVideo() {
    if (currentVideoIndex < currentVideoGallery.length - 1) {
        currentVideoIndex++;
        displayCurrentVideo();
    }
}

// Keyboard navigation for galleries
document.addEventListener('keydown', function(e) {
    // Image gallery navigation
    if (document.getElementById('imageGalleryModal').classList.contains('show')) {
        if (e.key === 'ArrowLeft') {
            e.preventDefault();
            previousImage();
        } else if (e.key === 'ArrowRight') {
            e.preventDefault();
            nextImage();
        } else if (e.key === 'Escape') {
            e.preventDefault();
            closeImageGallery();
        }
    }
    
    // Video gallery navigation
    if (document.getElementById('videoGalleryModal').classList.contains('show')) {
        if (e.key === 'ArrowLeft') {
            e.preventDefault();
            previousVideo();
        } else if (e.key === 'ArrowRight') {
            e.preventDefault();
            nextVideo();
        } else if (e.key === 'Escape') {
            e.preventDefault();
            closeVideoGallery();
        }
    }
});

// Close gallery modals when clicking outside content
document.getElementById('imageGalleryModal').addEventListener('click', function(e) {
    if (e.target === this) {
        closeImageGallery();
    }
});

document.getElementById('videoGalleryModal').addEventListener('click', function(e) {
    if (e.target === this) {
        closeVideoGallery();
    }
});

// Phone number anti-scraping
document.addEventListener('DOMContentLoaded', function() {
    const phoneElement = document.getElementById('phone-number');
    if (phoneElement) {
        let revealed = false;
        phoneElement.addEventListener('click', function() {
            if (!revealed) {
                const phoneNumber = this.dataset.number;
                this.textContent = phoneNumber;
                this.style.cursor = 'default';
                this.title = 'Phone number';
                revealed = true;
            }
        });
    }
});

// ElevenLabs Configuration
</script>

</body>
</html>
